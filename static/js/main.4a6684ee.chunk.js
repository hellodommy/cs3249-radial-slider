(this.webpackJsonpwidget=this.webpackJsonpwidget||[]).push([[0],{52:function(e,t,n){},53:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(29),o=n.n(i),s=(n(52),n(53),n(22)),c=n(23),u=n(25),d=n(24),h=n(11),l=n(79),p=270/31;function m(e,t,n){var r=e/2-t,a=250-n;return 180*Math.atan2(a,r)/Math.PI}function b(e){return e*Math.PI/180}var T=n(6),g=n(81),j=Object(T.b)({currTemp:function(e,t){return t.currTemp}}),v=Object(T.b)({targetTemp:function(e,t){return t.targetTemp}}),f=Object(g.a)({id:"thermostat",initial:"off",context:{targetTemp:72,currTemp:72,dT:2,dTCool:1.5,dTHeat:1.5,colour:"#E5E7EB"},states:{off:{on:{CURR_TEMP_CHANGE:{target:"tempCheck",actions:[j]},TARGET_TEMP_CHANGE:{target:"tempCheck",actions:[v]}}},cooling:{on:{CURR_TEMP_CHANGE:{target:"tempCheck",actions:[j]},TARGET_TEMP_CHANGE:{target:"tempCheck",actions:[v]}}},heating:{on:{CURR_TEMP_CHANGE:{target:"tempCheck",actions:[j]},TARGET_TEMP_CHANGE:{target:"tempCheck",actions:[v]}}},tempCheck:{on:{"":[{target:"off",cond:"isNormal"},{target:"cooling",cond:"isHot"},{target:"heating",cond:"isCold"}]}}}},{guards:{isHot:function(e,t){return e.currTemp>e.targetTemp+e.dT+e.dTCool},isCold:function(e,t){return e.currTemp<e.targetTemp-e.dT-e.dTHeat},isNormal:function(e,t){return e.currTemp<e.targetTemp+e.dT+e.dTCool&&e.currTemp>e.targetTemp-e.dT-e.dTHeat}}}),w=n(80),C=n(84),O=n(85),M=n(83),x=n(82),E=n(8),k=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(Object(h.a)(r)),r.handleClickAway=r.handleClickAway.bind(Object(h.a)(r)),r.state={error:!1},r}return Object(c.a)(n,[{key:"handleChange",value:function(e){this.props.onTemperatureChange(e.target.value)}},{key:"handleClickAway",value:function(e){this.props.currTemperature>=32&&this.props.currTemperature<=100?this.setState({error:!1}):this.setState({error:!0})}},{key:"render",value:function(){var e=this.props.currTemperature,t=this.state.error;return Object(E.jsx)(x.a,{onClickAway:this.handleClickAway,children:Object(E.jsxs)(M.a,{children:[Object(E.jsx)(w.a,{error:t,type:"number",id:"current-temperature-input",value:e,onChange:this.handleChange,endAdornment:Object(E.jsx)(C.a,{position:"end",children:"\xb0F"}),"aria-describedby":"current-temperature-input-helper-text",inputProps:{"aria-label":"currTemp"}}),Object(E.jsx)(O.a,{id:"current-temperature-input-helper-text",children:t?"Only between 32\xb0F to 100\xb0F":"Current Temperature"})]})})}}]),n}(a.a.Component);var y=200-200*Math.cos(b(22*p-45)),D=200-200*Math.sin(b(22*p-45)),A=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).service=Object(l.a)(f).onTransition((function(e){return r.setState({current:e})})),r.handleMouseMove=r.handleMouseMove.bind(Object(h.a)(r)),r.handleMouseDown=r.handleMouseDown.bind(Object(h.a)(r)),r.handleMouseUp=r.handleMouseUp.bind(Object(h.a)(r)),r.handleCurrTempChange=r.handleCurrTempChange.bind(Object(h.a)(r)),r.updateTarget=r.updateTarget.bind(Object(h.a)(r)),r.rotationDrag=r.rotationDrag.bind(Object(h.a)(r)),r.componentDidMount=r.componentDidMount.bind(Object(h.a)(r)),r.componentWillUnmount=r.componentWillUnmount.bind(Object(h.a)(r)),r.updateWindowDimensions=r.updateWindowDimensions.bind(Object(h.a)(r)),r.state={windowWidth:window.innerWidth,xknob:y,yknob:D,isMouseDown:!1,current:f.initialState},r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.service.start(),this.updateWindowDimensions(),window.addEventListener("updateTarget",this.updateTarget),window.addEventListener("rotationDrag",this.rotationDrag),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){this.service.stop(),window.removeEventListener("updateTarget",this.updateTarget),window.removeEventListener("rotationDrag",this.rotationDrag),window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({windowWidth:window.innerWidth})}},{key:"updateTarget",value:function(e){this.service.send({type:"TARGET_TEMP_CHANGE",targetTemp:e.detail.targetTemp})}},{key:"handleCurrTempChange",value:function(e){this.service.send({type:"CURR_TEMP_CHANGE",currTemp:e})}},{key:"rotationDrag",value:function(e){var t=m(this.state.windowWidth,e.detail.mouseX,e.detail.mouseY);if(t>=-45||t<=-135){var n=function(e){var t=b(e);return[200-200*Math.cos(t),200-200*Math.sin(t)]}(t);this.setState({xknob:n[0],yknob:n[1]});var r=function(e){var t=function(e){return e>=-45&&e<=180?e+45:e+405}(e);return Math.floor(t/p)+50}(t);if(r!==this.state.current.context.targetTemp){var a=new CustomEvent("updateTarget",{detail:{targetTemp:r}});window.dispatchEvent(a)}}}},{key:"handleMouseMove",value:function(e){if(this.state.isMouseDown){var t=new CustomEvent("rotationDrag",{detail:{mouseX:e.pageX,mouseY:e.pageY}});window.dispatchEvent(t)}}},{key:"handleMouseDown",value:function(e){this.setState({isMouseDown:!0})}},{key:"handleMouseUp",value:function(e){this.setState({isMouseDown:!1})}},{key:"render",value:function(){var e=this.state.current.context.currTemp,t=this.state.current.context.targetTemp,n=this.state.current.value,r=function(e){switch(e){case"off":return"#E5E7EB";case"cooling":return"#BFDBFE";case"heating":return"#FECACA";default:throw"Unkown mode"}}(n),a=this.state.xknob,i=this.state.yknob;return Object(E.jsxs)("div",{children:[Object(E.jsxs)("svg",{width:"400px",height:"400px",overflow:"visible",children:[Object(E.jsx)("circle",{id:"slider-body",onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,fill:r,cx:"200",cy:"200",r:"200"}),Object(E.jsx)("circle",{id:"knob-shadow",fill:"#9CA3AF",cx:a,cy:i,r:"16",fillOpacity:"0.2"}),Object(E.jsx)("circle",{id:"knob",fill:"#F9FAFB",cx:a,cy:i,r:"10",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,style:{cursor:"pointer"}}),Object(E.jsxs)("text",{x:"200",y:"200","text-anchor":"middle",fontSize:"3rem",children:[t,"\xb0F"]}),Object(E.jsxs)("text",{x:"200",y:"250","text-anchor":"middle",fontSize:"1rem",children:["Current: ",e,"\xb0F"]})]}),Object(E.jsxs)("p",{children:["Mode: ",n]}),Object(E.jsx)(k,{currTemperature:e,onTemperatureChange:this.handleCurrTempChange})]})}}]),n}(a.a.Component),F=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){return Object(E.jsx)("div",{style:{marginTop:50},children:Object(E.jsx)(A,{})})}}]),n}(a.a.Component);var _=function(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(F,{})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};o.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(_,{})}),document.getElementById("root")),U()}},[[59,1,2]]]);
//# sourceMappingURL=main.4a6684ee.chunk.js.map