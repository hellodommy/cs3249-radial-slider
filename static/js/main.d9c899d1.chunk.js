(this.webpackJsonpwidget=this.webpackJsonpwidget||[]).push([[0],{52:function(e,t,n){},53:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(29),o=n.n(i),c=(n(52),n(53),n(22)),s=n(23),u=n(25),d=n(24),h=n(11),l=n(79),p=n(6),m=n(81),g=Object(p.b)({currTemp:function(e,t){return t.currTemp}}),b=Object(p.b)({targetTemp:function(e,t){return t.targetTemp}}),T=Object(m.a)({id:"thermostat",initial:"off",context:{targetTemp:72,currTemp:72,dT:2,dTCool:1.5,dTHeat:1.5},states:{off:{on:{CURR_TEMP_CHANGE:{target:"tempCheck",actions:[g]},TARGET_TEMP_CHANGE:{target:"tempCheck",actions:[b]}}},cooling:{on:{CURR_TEMP_CHANGE:{target:"tempCheck",actions:[g]},TARGET_TEMP_CHANGE:{target:"tempCheck",actions:[b]}}},heating:{on:{CURR_TEMP_CHANGE:{target:"tempCheck",actions:[g]},TARGET_TEMP_CHANGE:{target:"tempCheck",actions:[b]}}},tempCheck:{on:{"":[{target:"off",cond:"isNormal"},{target:"cooling",cond:"isHot"},{target:"heating",cond:"isCold"}]}}}},{guards:{isHot:function(e,t){return e.currTemp>=e.targetTemp+e.dT+e.dTCool},isCold:function(e,t){return e.currTemp<=e.targetTemp-e.dT-e.dTHeat},isNormal:function(e,t){return e.currTemp<e.targetTemp+e.dT+e.dTCool&&e.currTemp>e.targetTemp-e.dT-e.dTHeat}}}),v=n(80),j=n(84),w=n(85),f=n(83),C=n(82),O=n(8),M=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(Object(h.a)(r)),r.handleClickAway=r.handleClickAway.bind(Object(h.a)(r)),r.state={error:!1},r}return Object(s.a)(n,[{key:"handleChange",value:function(e){this.props.onTemperatureChange(e.target.value)}},{key:"handleClickAway",value:function(e){this.props.currTemperature>=32&&this.props.currTemperature<=100?this.setState({error:!1}):this.setState({error:!0})}},{key:"render",value:function(){var e=this.props.currTemperature,t=this.state.error;return Object(O.jsx)(C.a,{onClickAway:this.handleClickAway,children:Object(O.jsxs)(f.a,{children:[Object(O.jsx)(v.a,{error:t,type:"number",id:"current-temperature-input",value:e,onChange:this.handleChange,endAdornment:Object(O.jsx)(j.a,{position:"end",children:"\xb0F"}),"aria-describedby":"current-temperature-input-helper-text",inputProps:{"aria-label":"currTemp"}}),Object(O.jsx)(w.a,{id:"current-temperature-input-helper-text",children:t?"Only between 32\xb0F to 100\xb0F":"Current Temperature"})]})})}}]),n}(a.a.Component);function E(e,t,n){var r=e/2-t,a=250-n;return 180*Math.atan2(a,r)/Math.PI}function x(e){var t=function(e){return e*Math.PI/180}(e);return[200-200*Math.cos(t),200-200*Math.sin(t)]}var y=270/31;var k=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).service=Object(l.a)(T).onTransition((function(e){return r.setState({current:e})})),r.handleMouseMove=r.handleMouseMove.bind(Object(h.a)(r)),r.handleMouseDown=r.handleMouseDown.bind(Object(h.a)(r)),r.handleScroll=r.handleScroll.bind(Object(h.a)(r)),r.handleMouseUp=r.handleMouseUp.bind(Object(h.a)(r)),r.handleCurrTempChange=r.handleCurrTempChange.bind(Object(h.a)(r)),r.updateTarget=r.updateTarget.bind(Object(h.a)(r)),r.handleRotationDrag=r.handleRotationDrag.bind(Object(h.a)(r)),r.componentDidMount=r.componentDidMount.bind(Object(h.a)(r)),r.componentWillUnmount=r.componentWillUnmount.bind(Object(h.a)(r)),r.updateWindowDimensions=r.updateWindowDimensions.bind(Object(h.a)(r)),r.state={angle:12*y+45,windowWidth:window.innerWidth,isMouseDown:!1,current:T.initialState},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.service.start(),this.updateWindowDimensions(),window.addEventListener("updateTarget",this.updateTarget),window.addEventListener("rotationDrag",this.handleRotationDrag),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){this.service.stop(),window.removeEventListener("updateTarget",this.updateTarget),window.removeEventListener("rotationDrag",this.handleRotationDrag),window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({windowWidth:window.innerWidth})}},{key:"updateTarget",value:function(e){this.service.send({type:"TARGET_TEMP_CHANGE",targetTemp:e.detail.targetTemp})}},{key:"handleCurrTempChange",value:function(e){this.service.send({type:"CURR_TEMP_CHANGE",currTemp:e})}},{key:"handleRotationDrag",value:function(e){var t=e.detail.deg;if(t>=-45||t<-135&&t>-180){this.setState({angle:t});var n=function(e){var t=function(e){return e>=-45&&e<=180?e+45:e+405}(e),n=(Math.floor(t/y*2)+100)/2;return 80.5===n?80:n}(t);if(n!==this.state.current.context.targetTemp){var r=new CustomEvent("updateTarget",{detail:{targetTemp:n}});window.dispatchEvent(r)}}}},{key:"handleScroll",value:function(e){this.setState({isMouseDown:!1}),e.preventDefault();var t=function(e,t){var n=e+.05*t;return n>=180?n-=360:n<=-180&&(n=180+.05*t),n}(this.state.angle,e.deltaY),n=new CustomEvent("rotationDrag",{detail:{deg:t}});window.dispatchEvent(n)}},{key:"handleMouseMove",value:function(e){if(this.state.isMouseDown){var t=E(this.state.windowWidth,e.pageX,e.pageY),n=new CustomEvent("rotationDrag",{detail:{deg:t}});window.dispatchEvent(n)}}},{key:"handleMouseDown",value:function(e){this.setState({isMouseDown:!0})}},{key:"handleMouseUp",value:function(e){this.setState({isMouseDown:!1})}},{key:"render",value:function(){var e=this.state.current.context.currTemp,t=this.state.current.context.targetTemp,n=function(e){switch(e){case"off":return"#E5E7EB";case"cooling":return"#BFDBFE";case"heating":return"#FECACA";default:throw new Error("Unkown mode")}}(this.state.current.value),r=x(this.state.angle)[0],a=x(this.state.angle)[1];return Object(O.jsxs)("div",{children:[Object(O.jsxs)("svg",{width:"400px",height:"400px",overflow:"visible",children:[Object(O.jsx)("circle",{id:"slider-body",onWheel:this.handleScroll,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,fill:n,cx:"200",cy:"200",r:"200"}),Object(O.jsx)("circle",{id:"knob-shadow",fill:"#9CA3AF",cx:r,cy:a,r:"16",fillOpacity:"0.2"}),Object(O.jsx)("circle",{id:"knob",fill:"#F9FAFB",cx:r,cy:a,r:"10",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,style:{cursor:"pointer"}}),Object(O.jsxs)("text",{x:"200",y:"200","text-anchor":"middle",fontSize:"3rem",children:[t,"\xb0F"]}),Object(O.jsxs)("text",{x:"200",y:"250","text-anchor":"middle",fontSize:"1rem",children:["Current: ",e,"\xb0F"]})]}),Object(O.jsx)("p",{children:Object(O.jsx)(M,{currTemperature:e,onTemperatureChange:this.handleCurrTempChange})})]})}}]),n}(a.a.Component),D=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{style:{marginTop:50},children:Object(O.jsx)(k,{})})}}]),n}(a.a.Component);var A=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(D,{})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(A,{})}),document.getElementById("root")),R()}},[[59,1,2]]]);
//# sourceMappingURL=main.d9c899d1.chunk.js.map